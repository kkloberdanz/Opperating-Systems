#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>

#include "problem2.h"

#define MAX_NUM_LENGTH 10000 

void __add_big_ints__(const int * op1, const int * op2, int * carry, int * result) { 
    if (*op1 + *op2 + *carry < 10) { 
        *carry = 0; 
        *result = *op1 + *op2;
    } else {
        *carry = 1;
        *result = *op1 + *op2 + *carry - 10;
    }
}

void add_and_print(char* num1, char* num2) {
	// Implement this function.  
    int carry, num1_int, num2_int, result;

    int shortest_length = (strlen(num1) < strlen(num2)) ? strlen(num1) : strlen(num2);

    carry = 0;
    int i;
    for (i = 0; i < shortest_length; ++i) { 
        num1_int = num1[i] - '0';
        num2_int = num2[i] - '0';

        //printf("num1 = %d, num2 = %d\n", num1_int, num2_int);
        __add_big_ints__(& num1_int, & num2_int, & carry, & result);
        //printf("result = %d, carry = %d\n\n", result, carry);
        printf("%d", result);
    }
    puts("");
    return;
}

int main (int argc , char * argv []) {
	FILE *file = fopen("problem2.input","r");
	if (file == NULL) {
		printf("Input file not found.\n");
		return 1;
	}
	char num1[MAX_NUM_LENGTH];
	char num2[MAX_NUM_LENGTH];
	while(fscanf(file, "%s %s", num1, num2) == 2) {
		add_and_print(num1, num2);
	}
	fclose(file);	
	return 0 ;
}

